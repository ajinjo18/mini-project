<%- include('./include/header') %>

    <!-- Sidebar Start -->
    <div class="sidebar pe-4 pb-3">
        <nav class="navbar bg-light navbar-light">
            <a class="navbar-brand mx-4 mb-3">
                <h3 class="text-primary"><i class=""></i>GO shop</h3>
            </a>
            <div class="d-flex align-items-center ms-4 mb-4">
                <!-- <div class="position-relative">
                      <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                      <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
                  </div> -->
                <div class="ms-3">
                    <h4 class="mb-0">Admin</h4>
                    <!-- <span>Admin</span> -->
                </div>
            </div>
            <div class="navbar-nav w-100">
                <a href="/admin/home" class="nav-item nav-link"><i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i
                            class="fas fa-flag me-2"></i>Banner</a>
                    <div style="text-align: center;" class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/bannerc" class="dropdown-item">Categories Banner</a>
                        <a href="/admin/offerbaner" class="dropdown-item">Offer Sale</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i
                            class="fa fa-laptop me-2"></i>Products</a>
                    <div style="text-align: center;" class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/addproduct" class="dropdown-item">Add Product</a>
                        <a href="/admin/allproducts" class="dropdown-item">Product List</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i
                            class="far fa-file-alt me-2"></i>Categories</a>
                    <div style="text-align: center;" class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/listcatagories" class="dropdown-item">List Categories</a>
                        <a href="/admin/addcategory" class="dropdown-item">Add Categories</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown"><i
                            class="fas fa-ticket-alt me-2"></i>Coupons</a>
                    <div style="text-align: center;" class="dropdown-menu bg-transparent border-0">
                        <a class="active" href="/admin/listcoupen" class="dropdown-item">List Coupons</a>
                        <a href="/admin/addcoupen" class="dropdown-item">Add Coupons</a>
                    </div>
                </div>
                <a href="/admin/users" class="nav-item nav-link"><i class="fa fa-user me-2"></i>Users</a>
                <a href="/admin/orders" class="nav-item nav-link"><i class="fas fa-shopping-cart me-2"></i>Orders</a>
                <a href="/admin/return" class="nav-item nav-link"><i class="fas fa-times me-2"></i>Return Orders</a>
                <a href="/admin/report" class="nav-item nav-link"><i class="fas fa-file-alt me-2"></i>Report</a>                
                <!-- <a href="#" class="nav-item nav-link active"><i class="fas fa-ticket-alt me-2"></i>Coupens</a> -->
                <!-- <a href="#" class="nav-item nav-link"><i class="fa fa-keyboard me-2"></i>Forms</a>
                  <a href="#" class="nav-item nav-link"><i class="fa fa-table me-2"></i>Tables</a>
                  <a href="#" class="nav-item nav-link"><i class="fa fa-chart-bar me-2"></i>Charts</a> -->
            </div>
        </nav>
    </div>
    <!-- Sidebar End -->


    <!-- Content Start -->
    <div class="content">
        <!-- Navbar Start -->
        <nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
            <a href="" class="navbar-brand d-flex d-lg-none me-4">
                <h2 class="text-primary mb-0"><i class=""></i></h2>
            </a>
            <a href="#" class="sidebar-toggler flex-shrink-0">
                <i class="fa fa-bars"></i>
            </a>
            <form class="d-none d-md-flex ms-4">
                <input class="form-control border-0" type="search" placeholder="Search">
            </form>
            <div class="navbar-nav align-items-center ms-auto">
                <div class="nav-item dropdown">

                    <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">

                    </div>
                </div>

                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                        <img class="rounded-circle me-lg-2" src="/img/icons8-male-user-96.png" alt=""
                            style="width: 40px; height: 40px;">
                        <span class="d-none d-lg-inline-flex">Admin</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                        <a href="#" class="dropdown-item">My Profile</a>
                        <a href="#" class="dropdown-item">Settings</a>
                        <a href="/admin/logout" class="dropdown-item">Log Out</a>
                    </div>
                </div>
            </div>
        </nav>
        <!-- Navbar End -->


        <div style="padding: 20px;" class="col-12">
            <div class="bg-light rounded h-100 p-4">
                <h6 class="mb-4">List Coupens</h6>
                <div class="table-responsive">
                    <table style="text-align: center;" class="table table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">No</th>
                                <th scope="col">Code</th>
                                <th>Discount</th>
                                <th>MinValue</th>
                                <th>ExpieryDate</th>
                                <th scope="col">Description</th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% coupens.forEach((row,index)=>{ %>
                                <tr>
                                    <th scope="row">
                                        <%=index+1 %>
                                    </th>
                                    <td>
                                        <%=row.code %>
                                    </td>
                                    <td>
                                        <%=row.discount %> %
                                    </td>
                                    <td>
                                        <%=row.minvalue %>
                                    </td>
                                    <td>
                                        <%=row.expirydate %>
                                    </td>
                                    <td>
                                        <%=row.discription %>
                                    </td>
                                    <td>
                                        <a data-bs-toggle="modal" data-bs-target="#exampleModal<%= index %>" id="show-alert" class="text-sucess"><i class="fas fa-edit fa-lg mx-1"></i></a>
                                        <!-- <button style="margin-left: 20px;" type="button" class="btn btn-success"
                                            data-bs-toggle="modal" data-bs-target="#exampleModal<%= index %>">
                                            <i class="fas fa-edit fa-lg mx-1"></i>
                                        </button> -->
                                        <!-- Modal -->
                                        <div class="modal fade" id="exampleModal<%= index %>" tabindex="-1"
                                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <h3 style="margin-top: 30px;">Edit Coupen</h3>
                                                    <form method="post" action="/admin/updatecoupen" style="padding: 20px;">
                                                        <div class="form-row">
                                                          <div class="form-group col-md-12">
                                                              <input name="code" value="<%= row.code %>" type="text" class="form-control" id="inputEmail4" placeholder="code" required>
                                                              <label for="inputEmail4"></label>
                                                          </div>
                                                          <div class="form-group col-md-12">
                                                              <input name="discount" value="<%= row.discount %>" type="number" class="form-control" id="inputPassword4" placeholder="100%" min="1" max="100" required>
                                                              <label for="inputPassword4"></label>
                                                          </div>
                                                        </div>
                                                        <div class="form-group col-md-12" >
                                                            <input name="minvalue" value="<%= row.minvalue %>"  type="number" class="form-control" id="inputAddress" placeholder="minvalue" required>
                                                            <!-- <input type="number" class="form-control" id="inputAddress" placeholder="minvalue"> -->
                                                            <label for="inputAddress"></label>
                                                        </div>
                                                        <div class="form-group col-md-12">
                                                            <input name="expirydate" value="<%= row.expirydate %>" type="date" class="form-control" id="inputAddress2" placeholder="expirydate" required>
                                                            <!-- <input type="date" class="form-control" id="inputAddress2" placeholder="expirydate"> -->
                                                            <label for="inputAddress2"></label>
                                                        </div>
                                                        <div class="form-group col-md-12">
                                                            <input name="discription" value="<%= row.discription %>" type="text" class="form-control" id="inputAddress3" placeholder="discription" required>
                                                            <label for="inputAddress3"></label>
                                                        </div>  
                                                        <input hidden name="id" value="<%= row._id %>" type="text">
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary"
                                                                data-bs-dismiss="modal">Close</button>
                                                            <button id="button<%= index %>" type="submit"
                                                                class="btn btn-primary">Save changes</button>
                                                        </div>                          
                                                      </form>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                        <a onclick="checker()" href="/admin/deletecoupen/<%= row._id %>"
                                            class="text-danger"><i class="fas fa-trash fa-lg mx-1"></i></a>
                                    </td>
                                </tr>
                        </tbody>
                        <% }) %>
                    </table>
                </div>
            </div>
        </div>
        <script>
            function checker() {
                const result = confirm('Are You Sure You Want to Delete?');
                if (result == false) {
                    event.preventDefault();
                }
            }
        </script>

        <script>
            setTimeout(function () {
                var alertDiv = document.getElementById('alert');
                if (alertDiv) {
                    alertDiv.remove();
                }
            }, 5000);
        </script>

        <%- include('./include/footer') %>